2025-08-29 21:48:33,623 - chatbot_logger - DEBUG - Initialized 5 KB chunks.
2025-08-29 21:48:33,623 - chatbot_logger - DEBUG - Loaded Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-29T21:48:33.623633"
}
2025-08-29 21:48:40,936 - chatbot_logger - DEBUG - Detected User Emotion: neutral (Scores: {"neutral": 0.6487919092178345, "surprise": 0.2859741449356079, "sadness": 0.026308510452508926, "joy": 0.02116825059056282, "fear": 0.0076522366143763065, "anger": 0.006251455284655094, "disgust": 0.0038535096682608128})
2025-08-29 21:48:41,243 - chatbot_logger - ERROR - Error during LLM-based goal/condition extraction: 'Input to ChatPromptTemplate is missing variables {\'"goals"\'}.  Expected: [\'"goals"\', \'assistant_response\', \'user_text\'] Received: [\'user_text\', \'assistant_response\']\nNote: if you intended {"goals"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"goals"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-08-29 21:48:41,243 - chatbot_logger - DEBUG - Updated Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-29T21:48:41.243719"
}
