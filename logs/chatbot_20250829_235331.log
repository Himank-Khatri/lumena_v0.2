2025-08-29 23:53:42,040 - chatbot_logger - INFO - Initializing chatbot backend...
2025-08-29 23:53:42,040 - chatbot_logger - INFO - metadata.json found. Clearing existing vector store.
2025-08-29 23:53:42,040 - chatbot_logger - INFO - Vector store cleared.
2025-08-29 23:53:42,040 - chatbot_logger - INFO - Existing vector store cleared based on metadata.json presence.
2025-08-29 23:53:42,040 - chatbot_logger - DEBUG - Loaded Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [
    "feeling better"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-29T21:58:47.217922"
}
2025-08-29 23:53:46,209 - chatbot_logger - DEBUG - Detected User Emotion: surprise (Scores: {"surprise": 0.5912309288978577, "neutral": 0.36003270745277405, "joy": 0.02212667092680931, "sadness": 0.01895271986722946, "anger": 0.003059570211917162, "fear": 0.002730763517320156, "disgust": 0.0018666069954633713})
2025-08-29 23:53:47,074 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new condition 'surprised' for user test_user_123.
2025-08-29 23:53:47,074 - chatbot_logger - INFO - User test_user_123 profile will be updated with new goals/conditions.
2025-08-29 23:53:47,074 - chatbot_logger - INFO - User test_user_123 profile updated with aggregated changes: {'goals': ['feeling better'], 'conditions': ['surprised']}
2025-08-29 23:53:47,089 - chatbot_logger - DEBUG - Updated Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [
    "surprised"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [
    "feeling better"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-29T23:53:47.074260"
}
2025-08-29 23:56:10,236 - chatbot_logger - DEBUG - Detected User Emotion: fear (Scores: {"fear": 0.9922989010810852, "joy": 0.002549596130847931, "sadness": 0.0023414466995745897, "anger": 0.0015070373192429543, "surprise": 0.000856594240758568, "neutral": 0.00030096020782366395, "disgust": 0.00014548905892297626})
2025-08-29 23:56:11,107 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new goal 'management' for user test_user_123.
2025-08-29 23:56:11,107 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new condition 'anxiety' for user test_user_123.
2025-08-29 23:56:11,107 - chatbot_logger - INFO - User test_user_123 profile will be updated with new goals/conditions.
2025-08-29 23:56:11,473 - chatbot_logger - INFO - User test_user_123 profile will be updated with new avoid topics: []
2025-08-29 23:56:11,473 - chatbot_logger - INFO - User test_user_123 profile updated with aggregated changes: {'goals': ['feeling better', 'management'], 'conditions': ['anxiety', 'surprised'], 'preferences': {'tone': 'genuine', 'length': 'short', 'avoid_topics': []}}
2025-08-29 23:56:11,490 - chatbot_logger - DEBUG - Updated Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [
    "anxiety",
    "surprised"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [
    "feeling better",
    "management"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-29T23:56:11.473207"
}
