2025-08-30 08:40:09,065 - chatbot_logger - INFO - Initializing chatbot backend...
2025-08-30 08:40:09,065 - chatbot_logger - INFO - metadata.json found. Clearing existing vector store before re-initialization.
2025-08-30 08:40:09,065 - chatbot_logger - INFO - Vector store cleared.
2025-08-30 08:40:09,065 - chatbot_logger - INFO - Existing vector store cleared based on metadata.json presence.
2025-08-30 08:40:09,410 - chatbot_logger - DEBUG - Initialized 5 KB chunks.
2025-08-30 08:40:09,410 - chatbot_logger - INFO - KB chunks initialized/re-initialized.
2025-08-30 08:40:09,410 - chatbot_logger - DEBUG - Loaded Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [
    "Apprehension",
    "anxiety",
    "Uncertainty"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": [
      "failure",
      "academic performance",
      "fear of failure",
      "anxiety",
      "bad marks",
      "bad numbers"
    ]
  },
  "goals": [
    "manage anxiety",
    "Clarify unknown or uncertain situations",
    "avoiding negative self-talk",
    "performance"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T08:18:51.098239"
}
2025-08-30 08:41:17,538 - chatbot_logger - DEBUG - Detected User Emotion: fear (Scores: {"fear": 0.9943576455116272, "sadness": 0.0013904091902077198, "neutral": 0.0010069023119285703, "surprise": 0.000950165034737438, "joy": 0.0009471681551076472, "anger": 0.0008679158636368811, "disgust": 0.00047968089347705245})
2025-08-30 08:41:17,959 - chatbot_logger - INFO - User Query (test_user_123): I am feeling anxious about an upcoming interview.
2025-08-30 08:41:17,959 - chatbot_logger - INFO - Assistant Response (test_user_123): I've noticed we might be touching on a sensitive topic. Would you like to steer our conversation in a different direction?
2025-08-30 08:41:18,253 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new goal 'prepare for interview' for user test_user_123.
2025-08-30 08:41:18,253 - chatbot_logger - INFO - User test_user_123 profile will be updated with new goals/conditions.
2025-08-30 08:41:19,003 - chatbot_logger - DEBUG - Profile Update (Option 3): Added new avoid topic 'interview' for user test_user_123 due to negative emotion.
2025-08-30 08:41:19,003 - chatbot_logger - INFO - User test_user_123 profile will be updated with new avoid topics: ['bad marks', 'academic performance', 'failure', 'anxiety', 'interview', 'bad numbers', 'fear of failure']
2025-08-30 08:41:19,003 - chatbot_logger - DEBUG - Final profile_patch for user test_user_123: {
  "goals": [
    "avoiding negative self-talk",
    "Clarify unknown or uncertain situations",
    "manage anxiety",
    "prepare for interview",
    "performance"
  ],
  "conditions": [
    "Apprehension",
    "anxiety",
    "Uncertainty"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": [
      "bad marks",
      "academic performance",
      "failure",
      "anxiety",
      "interview",
      "bad numbers",
      "fear of failure"
    ]
  }
}
2025-08-30 08:41:19,003 - chatbot_logger - INFO - User test_user_123 profile updated with aggregated changes: {'goals': ['avoiding negative self-talk', 'Clarify unknown or uncertain situations', 'manage anxiety', 'prepare for interview', 'performance'], 'conditions': ['Apprehension', 'anxiety', 'Uncertainty'], 'preferences': {'tone': 'genuine', 'length': 'short', 'avoid_topics': ['bad marks', 'academic performance', 'failure', 'anxiety', 'interview', 'bad numbers', 'fear of failure']}}
2025-08-30 08:41:19,034 - chatbot_logger - DEBUG - Updated Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [
    "Apprehension",
    "anxiety",
    "Uncertainty"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": [
      "bad marks",
      "academic performance",
      "failure",
      "anxiety",
      "interview",
      "bad numbers",
      "fear of failure"
    ]
  },
  "goals": [
    "avoiding negative self-talk",
    "Clarify unknown or uncertain situations",
    "manage anxiety",
    "prepare for interview",
    "performance"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T08:41:19.003369"
}
