2025-08-30 09:02:38,389 - chatbot_logger - INFO - Initializing chatbot backend...
2025-08-30 09:02:38,389 - chatbot_logger - INFO - metadata.json found. Clearing existing vector store before re-initialization.
2025-08-30 09:02:38,389 - chatbot_logger - INFO - Vector store cleared.
2025-08-30 09:02:38,389 - chatbot_logger - INFO - Existing vector store cleared based on metadata.json presence.
2025-08-30 09:02:38,732 - chatbot_logger - DEBUG - Initialized 5 KB chunks.
2025-08-30 09:02:38,732 - chatbot_logger - INFO - KB chunks initialized/re-initialized.
2025-08-30 09:02:38,732 - chatbot_logger - DEBUG - Loaded Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [
    "Apprehension",
    "anxiety",
    "Uncertainty"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": [
      "bad marks",
      "academic performance",
      "failure",
      "anxiety",
      "interview",
      "bad numbers",
      "fear of failure"
    ]
  },
  "goals": [
    "avoiding negative self-talk",
    "Clarify unknown or uncertain situations",
    "manage anxiety",
    "prepare for interview",
    "performance"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T08:41:19.003369"
}
2025-08-30 09:03:23,284 - chatbot_logger - DEBUG - Detected User Emotion: surprise (Scores: {"surprise": 0.4270595610141754, "sadness": 0.26498720049858093, "neutral": 0.20388653874397278, "fear": 0.07471976429224014, "joy": 0.011960355564951897, "disgust": 0.008978702127933502, "anger": 0.008407882414758205})
2025-08-30 09:03:23,842 - chatbot_logger - INFO - User Query (test_user_123): hi im h imank
2025-08-30 09:03:23,842 - chatbot_logger - INFO - Assistant Response (test_user_123): Hi H Imank, it's great to chat with you! I noticed that you're feeling surprised, and that's totally normal. Sometimes we can feel surprised by something without even realizing why. Would you like to talk about what's surprising you? Sometimes sharing what's on your mind can help you feel better.
2025-08-30 09:03:24,217 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new condition 'surprise' for user test_user_123.
2025-08-30 09:03:24,217 - chatbot_logger - INFO - User test_user_123 profile will be updated with new goals/conditions.
2025-08-30 09:03:24,225 - chatbot_logger - DEBUG - Final profile_patch for user test_user_123: {
  "goals": [
    "prepare for interview",
    "manage anxiety",
    "performance",
    "avoiding negative self-talk",
    "Clarify unknown or uncertain situations"
  ],
  "conditions": [
    "anxiety",
    "surprise",
    "Apprehension",
    "Uncertainty"
  ]
}
2025-08-30 09:03:24,225 - chatbot_logger - INFO - User test_user_123 profile updated with aggregated changes: {'goals': ['prepare for interview', 'manage anxiety', 'performance', 'avoiding negative self-talk', 'Clarify unknown or uncertain situations'], 'conditions': ['anxiety', 'surprise', 'Apprehension', 'Uncertainty']}
2025-08-30 09:03:24,227 - chatbot_logger - DEBUG - Updated Profile for test_user_123:
{
  "user_id": "test_user_123",
  "demographics": {},
  "conditions": [
    "anxiety",
    "surprise",
    "Apprehension",
    "Uncertainty"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": [
      "bad marks",
      "academic performance",
      "failure",
      "anxiety",
      "interview",
      "bad numbers",
      "fear of failure"
    ]
  },
  "goals": [
    "prepare for interview",
    "manage anxiety",
    "performance",
    "avoiding negative self-talk",
    "Clarify unknown or uncertain situations"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T09:03:24.225291"
}
