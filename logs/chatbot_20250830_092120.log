2025-08-30 09:21:33,396 - chatbot_logger - INFO - Initializing chatbot backend...
2025-08-30 09:21:33,396 - chatbot_logger - INFO - metadata.json found. Clearing existing vector store before re-initialization.
2025-08-30 09:21:33,412 - chatbot_logger - INFO - Vector store cleared.
2025-08-30 09:21:33,412 - chatbot_logger - INFO - Existing vector store cleared based on metadata.json presence.
2025-08-30 09:21:33,553 - chatbot_logger - DEBUG - Initialized 5 KB chunks.
2025-08-30 09:21:33,553 - chatbot_logger - INFO - KB chunks initialized/re-initialized.
2025-08-30 09:21:33,553 - chatbot_logger - DEBUG - Loaded Profile for HIMANK:
{
  "user_id": "HIMANK",
  "demographics": {},
  "conditions": [],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T09:12:16.166791"
}
2025-08-30 09:21:46,624 - chatbot_logger - DEBUG - Detected User Emotion: neutral (Scores: {"neutral": 0.6487919092178345, "surprise": 0.2859741449356079, "sadness": 0.026308510452508926, "joy": 0.02116825059056282, "fear": 0.0076522366143763065, "anger": 0.006251455284655094, "disgust": 0.0038535096682608128})
2025-08-30 09:21:47,290 - chatbot_logger - INFO - User Query (HIMANK): hi im himank
2025-08-30 09:21:47,290 - chatbot_logger - INFO - Assistant Response (HIMANK): Hi Himank! It's nice to chat with you. How are you doing today? Is there anything on your mind that you'd like to talk about or any specific topics you'd like to explore? I'm here to listen and support you in any way I can.
2025-08-30 09:21:47,548 - chatbot_logger - ERROR - Error during LLM-based goal/condition extraction: Error code: 400 - {'error': {'message': "Failed to call a function. Please adjust your prompt. See 'failed_generation' for more details.", 'type': 'invalid_request_error', 'code': 'tool_use_failed', 'failed_generation': '</tool-use>\n{"tool_call": {"id": "pending", "type": "function", "function": {"name": "GoalConditionExtraction"}, "parameters": {"properties": {"conditions": [], "goals": []}}}</tool-use>'}}
2025-08-30 09:21:47,548 - chatbot_logger - DEBUG - No profile updates detected for user HIMANK this turn.
2025-08-30 09:21:47,548 - chatbot_logger - DEBUG - Updated Profile for HIMANK:
{
  "user_id": "HIMANK",
  "demographics": {},
  "conditions": [],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T09:12:16.166791"
}
2025-08-30 09:21:57,679 - chatbot_logger - DEBUG - Detected User Emotion: fear (Scores: {"fear": 0.9925214648246765, "joy": 0.002394232666119933, "sadness": 0.002314693992957473, "anger": 0.0015553315170109272, "surprise": 0.000775929307565093, "neutral": 0.00029156444361433387, "disgust": 0.0001467686815885827})
2025-08-30 09:21:58,153 - chatbot_logger - INFO - User Query (HIMANK): i am anxious about today
2025-08-30 09:21:58,153 - chatbot_logger - INFO - Assistant Response (HIMANK): I'm so sorry to hear that you're feeling anxious today, Himank. It's completely normal to feel overwhelmed or worried sometimes. Would you like to talk about what's specifically causing your anxiety? Sometimes sharing your concerns with someone who is here to listen can help you feel a bit better. I'm here to listen and support you in any way I can.
2025-08-30 09:21:58,472 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new condition 'anxiety' for user HIMANK.
2025-08-30 09:21:58,472 - chatbot_logger - INFO - User HIMANK profile will be updated with new goals/conditions.
2025-08-30 09:21:58,838 - chatbot_logger - INFO - User HIMANK profile will be updated with new avoid topics: []
2025-08-30 09:21:58,838 - chatbot_logger - DEBUG - Final profile_patch for user HIMANK: {
  "goals": [],
  "conditions": [
    "anxiety"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  }
}
2025-08-30 09:21:58,838 - chatbot_logger - INFO - User HIMANK profile updated with aggregated changes: {'goals': [], 'conditions': ['anxiety'], 'preferences': {'tone': 'genuine', 'length': 'short', 'avoid_topics': []}}
2025-08-30 09:21:58,855 - chatbot_logger - DEBUG - Updated Profile for HIMANK:
{
  "user_id": "HIMANK",
  "demographics": {},
  "conditions": [
    "anxiety"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T09:21:58.838570"
}
2025-08-30 09:22:47,880 - chatbot_logger - DEBUG - Detected User Emotion: joy (Scores: {"joy": 0.9488380551338196, "surprise": 0.023275822401046753, "neutral": 0.01455537136644125, "sadness": 0.008309741504490376, "fear": 0.0027772376779466867, "anger": 0.0020277996081858873, "disgust": 0.00021591692348010838})
2025-08-30 09:22:49,042 - chatbot_logger - INFO - User Query (HIMANK): i have a project presentation today, help me
2025-08-30 09:22:49,042 - chatbot_logger - INFO - Assistant Response (HIMANK): I'm happy to help! It sounds like you're feeling a bit anxious about your presentation today. That's completely normal!

Can you tell me a bit more about what's making you anxious about the presentation? Is it the thought of speaking in front of a group, the pressure to perform well, or something else entirely?

Remember, I'm here to listen and offer support. What do you think you need to feel more prepared and confident for your presentation?
2025-08-30 09:22:49,307 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new goal 'public speaking' for user HIMANK.
2025-08-30 09:22:49,307 - chatbot_logger - DEBUG - Profile Update (Option 2): Added new goal 'project presentation' for user HIMANK.
2025-08-30 09:22:49,307 - chatbot_logger - INFO - User HIMANK profile will be updated with new goals/conditions.
2025-08-30 09:22:49,307 - chatbot_logger - DEBUG - Final profile_patch for user HIMANK: {
  "goals": [
    "project presentation",
    "public speaking"
  ],
  "conditions": [
    "anxiety"
  ]
}
2025-08-30 09:22:49,307 - chatbot_logger - INFO - User HIMANK profile updated with aggregated changes: {'goals': ['project presentation', 'public speaking'], 'conditions': ['anxiety']}
2025-08-30 09:22:49,324 - chatbot_logger - DEBUG - Updated Profile for HIMANK:
{
  "user_id": "HIMANK",
  "demographics": {},
  "conditions": [
    "anxiety"
  ],
  "preferences": {
    "tone": "genuine",
    "length": "short",
    "avoid_topics": []
  },
  "goals": [
    "project presentation",
    "public speaking"
  ],
  "triggers": [],
  "therapeutic_styles": [
    "CBT",
    "Mindfulness"
  ],
  "timezone": "UTC",
  "safety_plan": {
    "contacts": [],
    "grounding_preference": ""
  },
  "consents": {
    "data_use": true,
    "crisis_detection": true
  },
  "updated_at": "2025-08-30T09:22:49.307625"
}